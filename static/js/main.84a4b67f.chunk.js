(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{10:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return E}));var r={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUserName:function(t){return t.auth.user.name}},c=n(20),a=n.n(c),o=n(25),u=n(23),s=n.n(u),i=n(4),b={registerRequest:Object(i.b)("auth/registerRequest"),registerSuccess:Object(i.b)("auth/registerSuccess"),registerError:Object(i.b)("auth/registerError"),loginRequest:Object(i.b)("auth/loginRequest"),loginSuccess:Object(i.b)("auth/loginSuccess"),loginError:Object(i.b)("auth/loginError"),logoutRequest:Object(i.b)("auth/logoutRequest"),logoutSuccess:Object(i.b)("auth/logoutSuccess"),logoutError:Object(i.b)("auth/logoutError"),getCurrentUserRequest:Object(i.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(i.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(i.b)("auth/getCurrentUserError")};s.a.defaults.baseURL="https://connections-api.herokuapp.com/";var l,j,d,O,f=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},h=function(){s.a.defaults.headers.common.Authorization=""},g={register:function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(b.registerRequest()),e.prev=1,e.next=4,s.a.post("/users/signup",t);case 4:r=e.sent,f(r.data.token),n(b.registerSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(b.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(o.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(b.logoutRequest()),t.prev=1,t.next=4,s.a.post("/users/logOut");case 4:h(),e(b.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(b.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(b.loginRequest()),e.prev=1,e.next=4,s.a.post("/users/login",t);case 4:r=e.sent,f(r.data.token),n(b.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(b.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(o.a)(a.a.mark((function t(e,n){var r,c,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return f(c),e(b.getCurrentUserRequest()),t.prev=5,t.next=8,s.a.get("/users/current");case 8:o=t.sent,e(b.getCurrentUserSuccess(o.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(b.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},p=n(3),x=n(7),m={name:null,email:null},v=Object(i.c)(m,(l={},Object(p.a)(l,b.registerSuccess,(function(t,e){return e.payload.user})),Object(p.a)(l,b.loginSuccess,(function(t,e){return e.payload.user})),Object(p.a)(l,b.logoutSuccess,(function(t,e){return m})),Object(p.a)(l,b.getCurrentUserSuccess,(function(t,e){return e.payload})),l)),C=Object(i.c)(null,(j={},Object(p.a)(j,b.registerSuccess,(function(t,e){return e.payload.token})),Object(p.a)(j,b.loginSuccess,(function(t,e){return e.payload.token})),Object(p.a)(j,b.logoutSuccess,(function(){return null})),j)),k=function(t,e){return e.payload},S=Object(i.c)(null,(d={},Object(p.a)(d,b.registerError,k),Object(p.a)(d,b.loginError,k),Object(p.a)(d,b.logoutError,k),Object(p.a)(d,b.getCurrentUserError,k),d)),y=Object(i.c)(!1,(O={},Object(p.a)(O,b.registerSuccess,(function(){return!0})),Object(p.a)(O,b.loginSuccess,(function(){return!0})),Object(p.a)(O,b.getCurrentUserSuccess,(function(){return!0})),Object(p.a)(O,b.logoutSuccess,(function(){return!1})),Object(p.a)(O,b.registerError,(function(){return!1})),Object(p.a)(O,b.loginError,(function(){return!1})),Object(p.a)(O,b.getCurrentUserError,(function(){return!1})),O)),E=Object(x.c)({user:v,isAuthenticated:y,token:C,error:S})},17:function(t,e,n){"use strict";var r=n(4),c=Object(r.b)("form/Add_contactRequest"),a=Object(r.b)("form/Add_contactSuccess"),o=Object(r.b)("form/Add_contactError"),u=Object(r.b)("contactList/Delete_contactRequest"),s=Object(r.b)("contactList/Delete_contactSuccess"),i=Object(r.b)("contactList/Delete_contactError"),b=Object(r.b)("contactList/fetch_contactRequest"),l=Object(r.b)("contactList/fetch_contactSuccess"),j=Object(r.b)("contactList/fetch_contactError"),d=Object(r.b)("findInput/Filter_change");e.a={addContactRequest:c,addContactSuccess:a,addContactError:o,deleteContactRequest:u,deleteContactSuccess:s,deleteContactError:i,fetchContactRequest:b,fetchContactSuccess:l,fetchContactError:j,filterChange:d}},82:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(28),o=n.n(a),u=(n(53),n(5)),s=n(11),i=n(10),b=n(18),l=n(16),j=n(2),d=Object(b.a)({link:{color:"black",textDecoration:"none",marginRight:"20px",padding:"4px 6px"},activeLink:{color:"blue",border:"1px solid blue",borderRadius:"4px"}}),O=Object(s.b)((function(t){return{isAuthanticated:i.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthanticated,n=d();return Object(j.jsxs)("div",{children:[Object(j.jsx)(l.b,{to:"/",exact:!0,className:n.link,activeClassName:n.activeLink,children:"Main page"}),e&&Object(j.jsx)(l.b,{to:"/phonebook",exact:!0,className:n.link,activeClassName:n.activeLink,children:"Phonebook"})]})})),f=n.p+"static/media/default-avatar.057d3846.png",h=Object(b.a)({container:{display:"flex",justifyContent:"center",alignItems:"center"},avatar:{marginRight:"6px"},name:{fontWeight:"700",marginRight:"12px"},button:{backgroundColor:"aqua",padding:"6px 8px"}}),g={onLogout:i.a.logOut},p=Object(s.b)((function(t){return{name:i.c.getUserName(t),avatar:f}}),g)((function(t){var e=t.avatar,n=t.name,r=t.onLogout,c=h();return Object(j.jsxs)("div",{className:c.container,children:[Object(j.jsx)("img",{src:e,className:c.avatar,alt:"avatar",width:"32"}),Object(j.jsxs)("span",{className:c.name,children:["Welcome, ",n]}),Object(j.jsx)("button",{className:c.button,type:"button",onClick:r,children:"Logout"})]})})),x=Object(b.a)({container:{display:"flex",width:"20%",minWidth:"200px",justifyContent:"space-between",alignItems:"center"},link:{color:"black",textDecoration:"none",padding:"4px 6px"},activeLink:{color:"blue",border:"1px solid blue",borderRadius:"4px"}}),m=function(){var t=x();return Object(j.jsxs)("div",{className:t.container,children:[Object(j.jsx)(l.b,{to:"/register",exact:!0,className:t.link,activeClassName:t.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)(l.b,{to:"/login",exact:!0,className:t.link,activeClassName:t.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},v=Object(b.a)({header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 20px",borderBottom:"1px solid #2A3638"}}),C=Object(s.b)((function(t){return{isAuthenticated:i.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated,n=v();return Object(j.jsxs)("header",{className:n.header,children:[Object(j.jsx)(O,{}),e?Object(j.jsx)(p,{}):Object(j.jsx)(m,{})]})})),k=Object(b.a)({container:{width:"100vw",minWidth:"700px",height:"100vh",padding:"20px 20px"}}),S=function(t){var e=k();return Object(j.jsx)("div",{className:e.container,children:t.children})},y=n(22),E=n(31),R=Object(s.b)((function(t){return{isAuthenticated:i.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(E.a)(t,["component","isAuthenticated","redirectTo"]);return Object(j.jsx)(u.b,Object(y.a)(Object(y.a)({},c),{},{render:function(t){return n?Object(j.jsx)(e,Object(y.a)({},t)):Object(j.jsx)(u.a,{to:r})}}))})),A=Object(s.b)((function(t){return{isAuthenticated:i.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(E.a)(t,["component","isAuthenticated","redirectTo"]);return Object(j.jsx)(u.b,Object(y.a)(Object(y.a)({},c),{},{render:function(t){return n&&c.restricted?Object(j.jsx)(u.a,{to:r}):Object(j.jsx)(e,Object(y.a)({},t))}}))})),q=Object(r.lazy)((function(){return n.e(0).then(n.bind(null,88))})),w=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,91))})),U=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,89))})),L=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,90))}));var N,I,_,T={onGetCurrentUser:i.a.getCurrentUser},z=Object(s.b)(null,T)((function(t){var e=t.onGetCurrentUser;return Object(r.useEffect)((function(){e()}),[]),Object(j.jsxs)(S,{children:[Object(j.jsx)(C,{}),Object(j.jsx)(r.Suspense,{fallback:Object(j.jsx)("p",{children:"Loading..."}),children:Object(j.jsxs)(u.d,{children:[Object(j.jsx)(A,{exact:!0,path:"/",component:q}),Object(j.jsx)(A,{path:"/register",restricted:!0,redirectTo:"/phonebook",component:U}),Object(j.jsx)(A,{path:"/login",restricted:!0,redirectTo:"/phonebook",component:L}),Object(j.jsx)(R,{path:"/phonebook",component:w,redirectTo:"/login"}),Object(j.jsx)(u.a,{to:"/"})]})})]})})),D=n(27),W=n(4),B=n(3),G=n(7),J=n(17),M=J.a.addContactRequest,F=J.a.addContactSuccess,P=J.a.addContactError,H=J.a.deleteContactRequest,K=J.a.deleteContactSuccess,Q=J.a.deleteContactError,V=J.a.fetchContactRequest,X=J.a.fetchContactSuccess,Y=J.a.fetchContactError,Z=J.a.filterChange,$=Object(W.c)([],(N={},Object(B.a)(N,X,(function(t,e){return e.payload})),Object(B.a)(N,F,(function(t,e){var n=e.payload;return[].concat(Object(D.a)(t),[n])})),Object(B.a)(N,K,(function(t,e){var n=e.payload,r=t.filter((function(t){return t.id!==n}));return Object(D.a)(r)})),N)),tt=Object(W.c)("",Object(B.a)({},Z,(function(t,e){return e.payload}))),et=Object(W.c)(!1,(I={},Object(B.a)(I,M,(function(){return!0})),Object(B.a)(I,F,(function(){return!1})),Object(B.a)(I,P,(function(){return!1})),Object(B.a)(I,H,(function(){return!0})),Object(B.a)(I,K,(function(){return!1})),Object(B.a)(I,Q,(function(){return!1})),Object(B.a)(I,V,(function(){return!0})),Object(B.a)(I,X,(function(){return!1})),Object(B.a)(I,Y,(function(){return!1})),I)),nt=Object(W.c)(null,(_={},Object(B.a)(_,F,(function(){return null})),Object(B.a)(_,K,(function(){return null})),Object(B.a)(_,X,(function(){return null})),Object(B.a)(_,P,(function(t,e){return e.payload})),Object(B.a)(_,Q,(function(t,e){return e.payload})),Object(B.a)(_,Y,(function(t,e){return e.payload})),_)),rt=Object(G.c)({items:$,filter:tt,loading:et,error:nt}),ct=n(21),at=n(46),ot=n.n(at),ut=n(47),st=n.n(ut),it=[].concat(Object(D.a)(Object(W.d)({serializableCheck:{ignoredActions:[ct.a,ct.f,ct.b,ct.c,ct.d,ct.e]}})),[st.a]),bt={key:"auth",storage:ot.a,whitelist:["token"]},lt=Object(W.a)({reducer:{auth:Object(ct.g)(bt,i.b),contacts:rt},middleware:it,devTools:!1}),jt={store:lt,persistor:Object(ct.h)(lt)},dt=n(48);o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(s.a,{store:jt.store,children:Object(j.jsx)(dt.a,{loading:null,persistor:jt.persistor,children:Object(j.jsx)(l.a,{children:Object(j.jsx)(z,{})})})})}),document.getElementById("root"))}},[[82,5,6]]]);
//# sourceMappingURL=main.84a4b67f.chunk.js.map